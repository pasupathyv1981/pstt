<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>30-Day Healthy South Indian Family Menu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .tab-active {
            background-color: #E6A473;
            color: #FFFFFF;
            font-weight: 600;
        }
        .tab-inactive {
            background-color: #F3E9E2;
            color: #8D6E63;
        }
        .accordion-header {
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .accordion-header.open {
            background-color: #F3E9E2;
            border-left-color: #E6A473;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
        }
        .highlight-kids {
            background-color: #d1f4d1 !important;
        }
        .highlight-ckd {
            background-color: #ffdddd !important;
        }
        .meal-tag {
            font-size: 0.75rem;
            font-weight: 600;
            padding: 0.125rem 0.5rem;
            border-radius: 9999px;
        }
        .tag-kids {
            background-color: #A7F3D0;
            color: #065F46;
        }
        .tag-ckd {
            background-color: #FECACA;
            color: #991B1B;
        }
        .print-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #E6A473;
            color: white;
            padding: 12px;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            z-index: 1000;
        }
        .calendar-day-active {
            background-color: #BF754B;
            color: white;
            font-weight: bold;
            border-radius: 50%;
        }
        @media print {
            body * {
                visibility: hidden;
            }
            .print-area, .print-area * {
                visibility: visible;
            }
            .print-area {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
            .print-button, .no-print {
                display: none;
            }
            .accordion-content {
                max-height: none !important;
                display: block !important;
            }
            .accordion-header.open {
                background-color: #fff;
            }
            .tab-pane {
                 display: block !important;
            }
        }
    </style>
    <link rel="manifest" href="/manifest.json">
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then((registration) => {
              console.log('Service Worker registered with scope:', registration.scope);
            })
            .catch((error) => {
              console.error('Service Worker registration failed:', error);
            });
        });
      }
    </script>
</head>
<body class="antialiased">

    <div class="print-area container mx-auto p-4 sm:p-6 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-[#BF754B]">30-Day Healthy South Indian Family Menu</h1>
            <p class="mt-2 text-lg text-gray-600">An Interactive Planner for June</p>
        </header>

        <section id="key-info" class="mb-8 grid grid-cols-1 md:grid-cols-2 gap-6 no-print">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                <h2 class="text-xl font-bold text-[#BF754B] mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Critical CKD Dietary Guidelines
                </h2>
                <p class="text-gray-700">This section provides a summary of the most important dietary rules for the family's grandmother. It's essential to follow these guidelines closely for her health and well-being. Always consult her doctor for personalized advice.</p>
                <ul class="mt-4 space-y-2 text-sm text-gray-600 list-disc list-inside">
                    <li><strong class="font-semibold">Low Sodium:</strong> Minimize salt in all cooking. Avoid processed foods, pickles, and papads.</li>
                    <li><strong class="font-semibold">Controlled Protein:</strong> Emphasize plant-based proteins like Moong Dal. Animal protein only if approved by a dietitian.</li>
                    <li><strong class="font-semibold">Potassium Management:</strong> Leach high-potassium vegetables. Limit fruits like bananas and oranges.</li>
                    <li><strong class="font-semibold">Phosphorus Management:</strong> Limit dairy, nuts, seeds, and whole grains.</li>
                </ul>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                <h2 class="text-xl font-bold text-[#BF754B] mb-3 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Family Gut Health & Quick Prep
                </h2>
                 <p class="text-gray-700">This application is designed to support a healthy lifestyle for the entire family, with a focus on good digestion and meals that fit into a busy schedule. The tips here help make healthy eating achievable every day.</p>
                <ul class="mt-4 space-y-2 text-sm text-gray-600 list-disc list-inside">
                    <li><strong class="font-semibold">Promote Gut Health:</strong> Include fiber-rich grains, vegetables, and fermented foods like Idli/Dosa.</li>
                    <li><strong class="font-semibold">Quick Prep Tips:</strong> Prepare batters, chop vegetables, and soak dals in advance to meet the 30-min prep time.</li>
                     <li><strong class="font-semibold">Kids' Lunches:</strong> Menus are designed to be healthy, appealing, and easy to pack for school.</li>
                </ul>
            </div>
        </section>

        <div class="bg-white p-4 sm:p-6 rounded-2xl shadow-md border border-gray-200">
            <h2 class="text-xl font-bold text-[#BF754B] mb-4">June 2025 Calendar</h2>
            <div id="calendar-container" class="mb-8 p-4 bg-gray-50 rounded-lg shadow-inner">
                <div class="flex justify-between items-center mb-4">
                    <button id="prevMonth" class="px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors duration-200 no-print">&lt;</button>
                    <span id="currentMonthYear" class="text-lg font-semibold text-gray-800"></span>
                    <button id="nextMonth" class="px-3 py-1 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors duration-200 no-print">&gt;</button>
                </div>
                <div id="calendar-grid" class="grid grid-cols-7 text-center gap-1">
                    <div class="font-bold text-gray-700 py-2">Sun</div>
                    <div class="font-bold text-gray-700 py-2">Mon</div>
                    <div class="font-bold text-gray-700 py-2">Tue</div>
                    <div class="font-bold text-gray-700 py-2">Wed</div>
                    <div class="font-bold text-gray-700 py-2">Thu</div>
                    <div class="font-bold text-gray-700 py-2">Fri</div>
                    <div class="font-bold text-gray-700 py-2">Sat</div>
                </div>
            </div>

            <div class="mb-6 no-print">
                <label class="block text-lg font-semibold text-gray-700 mb-3">Highlight Meals For:</label>
                <div class="flex flex-wrap gap-3">
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="highlight" value="none" class="form-radio text-amber-600" checked>
                        <span class="text-gray-600">None</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="highlight" value="kids" class="form-radio text-green-600">
                        <span class="text-gray-600">Kid's Lunchbox</span>
                    </label>
                    <label class="flex items-center space-x-2 cursor-pointer">
                        <input type="radio" name="highlight" value="ckd" class="form-radio text-red-600">
                        <span class="text-gray-600">CKD Modification</span>
                    </label>
                </div>
            </div>

            <div class="mb-6 no-print">
                <div id="tabs" class="flex flex-wrap justify-center gap-2 sm:gap-4">
                </div>
            </div>

            <div id="tab-content">
            </div>
        </div>
    </div>
    
    <button onclick="window.print()" class="print-button no-print" aria-label="Print Menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm2-9V5a2 2 0 012-2h2a2 2 0 012 2v3"></path></svg>
    </button>

    <script>
        const menuData = [
            { day: 1, dayOfWeek: 'Saturday', meals: { breakfast: "Idli with Sambar & Coconut Chutney", kids: "Mini Idlis with Sambar", ckd: "Idli (2-3). Sambar with leached low-potassium veg. Chutney with minimal coconut, no salt.", snack1: "Seasonal Fruit (Mango) / Apple (peeled) for CKD", lunch: "Brown Rice with Aviyal & Moong Dal Tadka", ckd_lunch: "Small portion brown rice. Aviyal with low-potassium veg. Low salt dal.", snack2: "Sprouted Moong Dal Salad / Plain for CKD", dinner: "Adai with Vegetable Stew", ckd_dinner: "Adai (1-2) with minimal salt. CKD-friendly veg stew."}},
            { day: 2, dayOfWeek: 'Sunday', meals: { breakfast: "Dosa with Peanut Chutney & Sambar", kids: "Dosa rolls with dry potato/cabbage poriyal", ckd: "Dosa (1-2). Chutney with less peanuts, no salt. CKD-friendly Sambar.", snack1: "Buttermilk (thin, unsalted for CKD)", lunch: "Chicken Curry with Brown Rice", ckd_lunch: "Brown Rice with Bottle Gourd Dal (low salt). Avoid chicken unless approved.", snack2: "Roasted Makhana (no salt for CKD)", dinner: "Wheat Chapati/Phulka with Ridge Gourd Kootu", ckd_dinner: "Chapati (1-2). Low salt Ridge Gourd Kootu."}},
            { day: 3, dayOfWeek: 'Monday', meals: { breakfast: "Semiya Upma with vegetables", kids: "Semiya Upma", ckd: "Semiya Upma with low-potassium veg, very low salt.", snack1: "Cucumber slices", lunch: "Quinoa/Millets Upma with Rasam", kids_lunch: "Quinoa/Millets Upma", ckd_lunch: "Upma with low-potassium veg. Rasam with minimal tamarind/tomato, low salt.", snack2: "Boiled Chana (chickpeas) / Plain for CKD", dinner: "Vegetable Rava Dosa with Vegetable Kurma", ckd_dinner: "Rava Dosa (1-2). Kurma with CKD-friendly veg, minimal coconut."}},
            { day: 4, dayOfWeek: 'Tuesday', meals: { breakfast: "Pesarattu with Ginger Chutney", kids: "Pesarattu", ckd: "Pesarattu (1-2). Chutney with very low salt, no jaggery.", snack1: "Watermelon / Pear (peeled) for CKD", lunch: "Lemon Rice with Beetroot Poriyal", kids_lunch: "Lemon Rice (no nuts) & Beetroot Poriyal", ckd_lunch: "Small portion Lemon Rice (no nuts, low salt). Leached Beetroot Poriyal.", snack2: "Roasted Poha Chivda / Plain for CKD", dinner: "Whole Wheat Dosa with mixed vegetable stew", ckd_dinner: "Whole Wheat Dosa (1-2). Stew with low-potassium veg."}},
            { day: 5, dayOfWeek: 'Wednesday', meals: { breakfast: "Pongal with Coconut Chutney", kids: "Pongal", ckd: "Very low salt Pongal. Chutney with minimal coconut, no salt.", snack1: "Orange / Grapes for CKD", lunch: "Vegetable Pulao", kids_lunch: "Vegetable Pulao", ckd_lunch: "Small portion very low salt Pulao. Avoid yogurt.", snack2: "Hard-boiled egg white (Family) / Consult dietitian for CKD", dinner: "Ragi Mudde with Snake Gourd Curry", ckd_dinner: "Small portion Ragi Mudde. Very low salt Snake Gourd Curry."}},
            { day: 6, dayOfWeek: 'Thursday', meals: { breakfast: "Appam with Vegetable Stew", kids: "Appam with dry vegetable curry", ckd: "Appam (1-2). Stew with low-potassium veg.", snack1: "Guava / Pineapple for CKD", lunch: "Bisibelebath", kids_lunch: "Bisibelebath", ckd_lunch: "Small portion low salt Bisibelebath with leached veg.", snack2: "Roasted Chickpeas / Plain for CKD", dinner: "Moong Dal Cheela with Amaranth Leaves", ckd_dinner: "Moong Dal Cheela (1-2). Small portion leached Amaranth Leaves."}},
            { day: 7, dayOfWeek: 'Friday', meals: { breakfast: "Vegetable Uttapam with Coconut Chutney", kids: "Mini Uttapam", ckd: "Uttapam (1-2) with low-potassium veg. CKD-friendly chutney.", snack1: "Papaya", lunch: "Fish Curry with Brown Rice", kids_lunch: "Brown rice with Cabbage Poriyal", ckd_lunch: "Brown Rice with leached Cabbage Poriyal & Moong Dal. Avoid fish unless approved.", snack2: "Roasted Sweet Potato / Apple slices for CKD", dinner: "Wheat Chapati with Lauki Sabzi", ckd_dinner: "Chapati (1-2). Very low salt Lauki Sabzi."}},
            { day: 8, dayOfWeek: 'Saturday', meals: { breakfast: "Poha Upma with vegetables", kids: "Poha Upma", ckd: "Poha Upma with low-potassium veg, very low salt, no peanuts.", snack1: "Grapes", lunch: "Vegetable Biryani with Raita (Family)", ckd_lunch: "Small portion very low salt Biryani. Avoid Raita.", snack2: "Roasted peanuts (Family) / Avoid for CKD", dinner: "Moong Dal Khichdi", ckd_dinner: "Very low salt Moong Dal Khichdi. Avoid Raita." }},
            { day: 9, dayOfWeek: 'Sunday', meals: { breakfast: "Idli with Tomato Chutney & Sambar", kids: "Mini Idlis with dry vegetable poriyal", ckd: "Idli. Chutney with minimal tomato, no salt. CKD-friendly Sambar.", snack1: "Watermelon / Pear (peeled) for CKD", lunch: "Chicken Stew with Brown Rice", ckd_lunch: "Brown Rice with Ash Gourd Kootu. Avoid chicken unless approved.", snack2: "Roasted Chana Dal (Daliya)", dinner: "Wheat Chapati with Mixed Vegetable Curry", ckd_dinner: "Chapati. Curry with low-potassium veg, very low salt." }},
            { day: 10, dayOfWeek: 'Monday', meals: { breakfast: "Wheat Dosa with Coconut Chutney", kids: "Wheat Dosa", ckd: "Wheat Dosa (1-2). CKD-friendly Chutney.", snack1: "Apple slices", lunch: "Curd Rice (Family) with Snake Gourd Poriyal", kids_lunch: "Curd Rice", ckd_lunch: "Brown Rice with low salt Snake Gourd Poriyal & Moong Dal. Avoid curd rice.", snack2: "Boiled Corn (Family) / Avoid for CKD", dinner: "Vegetable Oats Upma with thin Dal", ckd_dinner: "Oats Upma with low-potassium veg. CKD-friendly Dal." }},
            { day: 11, dayOfWeek: 'Tuesday', meals: { breakfast: "Ragi Dosa with Peanut Chutney", kids: "Ragi Dosa", ckd: "Ragi Dosa (1-2). CKD-friendly Chutney.", snack1: "Papaya", lunch: "Sambar Rice with Cabbage Poriyal", kids_lunch: "Sambar Rice", ckd_lunch: "Brown Rice with leached Cabbage Poriyal & CKD-friendly Sambar.", snack2: "Roasted Poha", dinner: "Wheat Chapati with Green Bean Curry", ckd_dinner: "Chapati. Low salt Green Bean Curry with minimal coconut." }},
            { day: 12, dayOfWeek: 'Wednesday', meals: { breakfast: "Appam with Vegetable Stew", kids: "Appam with dry vegetable curry", ckd: "Appam. CKD-friendly Stew.", snack1: "Pineapple", lunch: "Lemon Rice with Carrot & Beans Poriyal", kids_lunch: "Lemon Rice & Carrot/Beans Poriyal", ckd_lunch: "Small portion low salt Lemon Rice (no nuts). Low salt poriyal.", snack2: "Sprouted Moong Dal", dinner: "Moong Dal Dosa with vegetable curry", ckd_dinner: "Moong Dal Dosa (1-2). CKD-friendly curry." }},
            { day: 13, dayOfWeek: 'Thursday', meals: { breakfast: "Plain Dosa with Coconut Chutney", kids: "Dosa rolls with dry potato/cabbage poriyal", ckd: "Dosa. CKD-friendly Chutney & Sambar.", snack1: "Guava / Pear (peeled) for CKD", lunch: "Vegetable Pulao with plain Dal", kids_lunch: "Vegetable Pulao", ckd_lunch: "Small portion low salt Pulao with leached veg. CKD-friendly Dal.", snack2: "Hard-boiled egg white (Family) / Consult dietitian for CKD", dinner: "Chapati with Palak Dal (Family)", ckd_dinner: "Chapati with Lauki Dal. Avoid Palak Dal." }},
            { day: 14, dayOfWeek: 'Friday', meals: { breakfast: "Idli with Peanut Chutney & Sambar", kids: "Mini Idlis with Sambar", ckd: "Idli. CKD-friendly Chutney & Sambar.", snack1: "Mango / Apple (peeled) for CKD", lunch: "Fish Fry (Family) with Brown Rice", ckd_lunch: "Brown Rice with Ridge Gourd Poriyal & Moong Dal. Avoid fish unless approved.", snack2: "Roasted Makhana", dinner: "Vegetable Kichadi with thin Dal", ckd_dinner: "Low salt Vegetable Kichadi with low-potassium veg. CKD-friendly Dal." }},
            { day: 15, dayOfWeek: 'Saturday', meals: { breakfast: "Pesarattu with Coconut Chutney", kids: "Pesarattu", ckd: "Pesarattu. CKD-friendly chutney.", snack1: "Cucumber slices", lunch: "Bisibelebath", kids_lunch: "Bisibelebath", ckd_lunch: "Small portion CKD-friendly Bisibelebath.", snack2: "Boiled Chana / Plain for CKD", dinner: "Wheat Chapati with Lauki Kootu", ckd_dinner: "Chapati. Very low salt Lauki Kootu." }},
            { day: 16, dayOfWeek: 'Sunday', meals: { breakfast: "Pongal with Sambar", kids: "Pongal", ckd: "Very low salt Pongal. CKD-friendly Sambar.", snack1: "Buttermilk (thin, unsalted for CKD)", lunch: "Chicken Curry with Brown Rice", ckd_lunch: "Brown Rice with leached Cabbage Poriyal & Moong Dal. Avoid chicken unless approved.", snack2: "Roasted Poha Chivda / Plain for CKD", dinner: "Vegetable Rava Dosa with Vegetable Stew", ckd_dinner: "Rava Dosa. CKD-friendly Stew." }},
            { day: 17, dayOfWeek: 'Monday', meals: { breakfast: "Semiya Upma with vegetables", kids: "Semiya Upma", ckd: "CKD-friendly Semiya Upma.", snack1: "Watermelon / Apple (peeled) for CKD", lunch: "Quinoa/Millets Upma with Rasam", kids_lunch: "Quinoa/Millets Upma", ckd_lunch: "CKD-friendly Upma & Rasam.", snack2: "Sprouted Moong Dal Salad / Plain for CKD", dinner: "Wheat Chapati with Ash Gourd Sabzi", ckd_dinner: "Chapati. Very low salt Ash Gourd Sabzi." }},
            { day: 18, dayOfWeek: 'Tuesday', meals: { breakfast: "Adai with Avial", kids: "Adai", ckd: "Adai. CKD-friendly Avial.", snack1: "Papaya", lunch: "Lemon Rice with Snake Gourd Poriyal", kids_lunch: "Lemon Rice & Snake Gourd Poriyal", ckd_lunch: "Small portion CKD-friendly Lemon Rice. Very low salt poriyal.", snack2: "Roasted Makhana", dinner: "Moong Dal Cheela with vegetable curry", ckd_dinner: "Moong Dal Cheela. CKD-friendly curry." }},
            { day: 19, dayOfWeek: 'Wednesday', meals: { breakfast: "Ragi Dosa with Coconut Chutney", kids: "Ragi Dosa", ckd: "Ragi Dosa. CKD-friendly chutney.", snack1: "Orange / Grapes for CKD", lunch: "Sambar Rice with Okra Poriyal", kids_lunch: "Sambar Rice", ckd_lunch: "Brown Rice with low salt Okra Poriyal & CKD-friendly Sambar.", snack2: "Hard-boiled egg white (Family) / Consult dietitian for CKD", dinner: "Vegetable Oats Upma with thin Dal", ckd_dinner: "CKD-friendly Oats Upma & Dal." }},
            { day: 20, dayOfWeek: 'Thursday', meals: { breakfast: "Plain Dosa with Peanut Chutney & Sambar", kids: "Dosa rolls with dry potato/cabbage poriyal", ckd: "Dosa. CKD-friendly chutney & Sambar.", snack1: "Pineapple", lunch: "Vegetable Pulao with plain Dal", kids_lunch: "Vegetable Pulao", ckd_lunch: "CKD-friendly Pulao & Dal.", snack2: "Roasted Chickpeas / Plain for CKD", dinner: "Wheat Chapati with Ridge Gourd Sabzi", ckd_dinner: "Chapati. Very low salt Ridge Gourd Sabzi." }},
            { day: 21, dayOfWeek: 'Friday', meals: { breakfast: "Idli with Coconut Chutney & Sambar", kids: "Mini Idlis with Sambar", ckd: "Idli. CKD-friendly chutney & Sambar.", snack1: "Mango / Apple (peeled) for CKD", lunch: "Fish Curry (Family) with Brown Rice", ckd_lunch: "Brown Rice with Lauki Poriyal & Moong Dal. Avoid fish unless approved.", snack2: "Roasted Poha / Plain for CKD", dinner: "Moong Dal Khichdi with thin Dal", ckd_dinner: "CKD-friendly Moong Dal Khichdi & Dal." }},
            { day: 22, dayOfWeek: 'Saturday', meals: { breakfast: "Poha Upma with vegetables", kids: "Poha Upma", ckd: "CKD-friendly Poha Upma.", snack1: "Grapes", lunch: "Vegetable Biryani with Raita (Family)", ckd_lunch: "CKD-friendly Biryani. Avoid Raita.", snack2: "Roasted peanuts (Family) / Avoid for CKD", dinner: "Wheat Chapati with Cabbage Poriyal", ckd_dinner: "Chapati. Leached, very low salt Cabbage Poriyal." }},
            { day: 23, dayOfWeek: 'Sunday', meals: { breakfast: "Dosa with Tomato Chutney & Sambar", kids: "Dosa rolls with dry vegetable poriyal", ckd: "Dosa. CKD-friendly chutney & Sambar.", snack1: "Buttermilk (thin, unsalted for CKD)", lunch: "Chicken Stew (Family) with Brown Rice", ckd_lunch: "Brown Rice with Snake Gourd Dal. Avoid chicken unless approved.", snack2: "Roasted Chana Dal (Daliya)", dinner: "Vegetable Rava Dosa with Vegetable Kurma", ckd_dinner: "Rava Dosa. CKD-friendly Kurma." }},
            { day: 24, dayOfWeek: 'Monday', meals: { breakfast: "Wheat Dosa with Coconut Chutney", kids: "Wheat Dosa", ckd: "Wheat Dosa. CKD-friendly chutney.", snack1: "Apple slices", lunch: "Curd Rice (Family) with Carrot & Beans Poriyal", kids_lunch: "Curd Rice", ckd_lunch: "Brown Rice with low salt Carrot/Beans Poriyal & Moong Dal. Avoid curd rice.", snack2: "Boiled Corn (Family) / Avoid for CKD", dinner: "Vegetable Oats Upma with thin Dal", ckd_dinner: "CKD-friendly Oats Upma & Dal." }},
            { day: 25, dayOfWeek: 'Tuesday', meals: { breakfast: "Pesarattu with Ginger Chutney", kids: "Pesarattu", ckd: "Pesarattu. CKD-friendly chutney.", snack1: "Watermelon / Pear (peeled) for CKD", lunch: "Sambar Rice with Ash Gourd Poriyal", kids_lunch: "Sambar Rice", ckd_lunch: "Brown Rice with low salt Ash Gourd Poriyal & CKD-friendly Sambar.", snack2: "Roasted Poha / Plain for CKD", dinner: "Wheat Chapati with Green Bean Curry", ckd_dinner: "Chapati. CKD-friendly Green Bean Curry." }},
            { day: 26, dayOfWeek: 'Wednesday', meals: { breakfast: "Pongal with Coconut Chutney", kids: "Pongal", ckd: "CKD-friendly Pongal & chutney.", snack1: "Papaya", lunch: "Lemon Rice with Lauki Poriyal", kids_lunch: "Lemon Rice & Lauki Poriyal", ckd_lunch: "CKD-friendly Lemon Rice. Very low salt Lauki Poriyal.", snack2: "Sprouted Moong Dal / Plain for CKD", dinner: "Moong Dal Dosa with vegetable curry", ckd_dinner: "Moong Dal Dosa. CKD-friendly curry." }},
            { day: 27, dayOfWeek: 'Thursday', meals: { breakfast: "Appam with Vegetable Stew", kids: "Appam with dry vegetable curry", ckd: "Appam. CKD-friendly Stew.", snack1: "Pineapple", lunch: "Bisibelebath", kids_lunch: "Bisibelebath", ckd_lunch: "CKD-friendly Bisibelebath.", snack2: "Roasted Chickpeas / Plain for CKD", dinner: "Wheat Chapati with Snake Gourd Kootu", ckd_dinner: "Chapati. Very low salt Snake Gourd Kootu." }},
            { day: 28, dayOfWeek: 'Friday', meals: { breakfast: "Idli with Peanut Chutney & Sambar", kids: "Mini Idlis with Sambar", ckd: "Idli. CKD-friendly chutney & Sambar.", snack1: "Mango / Apple (peeled) for CKD", lunch: "Fish Fry (Family) with Brown Rice", ckd_lunch: "Brown Rice with leached Cabbage Poriyal & Moong Dal. Avoid fish unless approved.", snack2: "Roasted Makhana", dinner: "Vegetable Kichadi with thin Dal", ckd_dinner: "CKD-friendly Vegetable Kichadi & Dal." }},
            { day: 29, dayOfWeek: 'Saturday', meals: { breakfast: "Ragi Dosa with Peanut Chutney", kids: "Ragi Dosa", ckd: "Ragi Dosa. CKD-friendly chutney.", snack1: "Cucumber slices", lunch: "Vegetable Pulao with plain Dal", kids_lunch: "Vegetable Pulao", ckd_lunch: "CKD-friendly Pulao & Dal.", snack2: "Boiled Chana / Plain for CKD", dinner: "Wheat Chapati with Ridge Gourd Sabzi", ckd_dinner: "Chapati. Very low salt Ridge Gourd Sabzi." }},
            { day: 30, dayOfWeek: 'Sunday', meals: { breakfast: "Pongal with Sambar", kids: "Pongal", ckd: "CKD-friendly Pongal & Sambar.", snack1: "Buttermilk (thin, unsalted for CKD)", lunch: "Chicken Curry with Brown Rice", ckd_lunch: "Brown Rice with Ash Gourd Kootu. Avoid chicken unless approved.", snack2: "Roasted Poha Chivda / Plain for CKD", dinner: "Vegetable Rava Dosa with Vegetable Stew", ckd_dinner: "Rava Dosa. CKD-friendly Stew." }},
        ];

        const tabsContainer = document.getElementById('tabs');
        const contentContainer = document.getElementById('tab-content');
        const weeks = Math.ceil(menuData.length / 7);

        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        function initializeApp() {
            for (let i = 1; i <= weeks; i++) {
                const tab = document.createElement('button');
                tab.textContent = `Week ${i}`;
                tab.dataset.week = i;
                tab.className = `py-2 px-4 rounded-full text-sm sm:text-base font-medium transition-colors duration-300 ${i === 1 ? 'tab-active' : 'tab-inactive'}`;
                tabsContainer.appendChild(tab);

                const pane = document.createElement('div');
                pane.id = `week-${i}`;
                pane.className = `tab-pane ${i === 1 ? '' : 'hidden'}`;
                contentContainer.appendChild(pane);
            }
            
            renderWeek(1);
            renderCalendar(2025, 5); // June 2025 (month is 0-indexed, so 5 for June)

            tabsContainer.addEventListener('click', (e) => {
                if (e.target.tagName === 'BUTTON') {
                    const week = e.target.dataset.week;
                    switchTab(week);
                }
            });

            document.querySelectorAll('input[name="highlight"]').forEach(radio => {
                radio.addEventListener('change', handleHighlight);
            });

            document.getElementById('prevMonth').addEventListener('click', () => {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCalendar(currentYear, currentMonth);
            });

            document.getElementById('nextMonth').addEventListener('click', () => {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCalendar(currentYear, currentMonth);
            });
        }

        function switchTab(week) {
            document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.add('hidden'));
            document.getElementById(`week-${week}`).classList.remove('hidden');

            document.querySelectorAll('#tabs button').forEach(button => {
                if (button.dataset.week === week) {
                    button.classList.remove('tab-inactive');
                    button.classList.add('tab-active');
                } else {
                    button.classList.remove('tab-active');
                    button.classList.add('tab-inactive');
                }
            });
            renderWeek(week);
            handleHighlight();
        }

        function renderWeek(week) {
            const pane = document.getElementById(`week-${week}`);
            if (pane.innerHTML !== '') return;

            const startDay = (week - 1) * 7;
            const endDay = startDay + 7;
            const weekData = menuData.slice(startDay, endDay);

            const accordionContainer = document.createElement('div');
            accordionContainer.className = 'space-y-3';
            
            weekData.forEach(item => {
                const dayHtml = `
                    <div class="accordion-item rounded-lg overflow-hidden border border-gray-200" id="day-${item.day}-accordion">
                        <div class="accordion-header flex justify-between items-center p-4 bg-gray-50 border-l-4 border-transparent">
                            <div>
                                <h3 class="font-semibold text-lg text-gray-800">Day ${item.day}</h3>
                                <p class="text-sm text-gray-500">${item.dayOfWeek}</p>
                            </div>
                            <svg class="w-6 h-6 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="accordion-content bg-white">
                            <div class="p-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                                ${createMealEntry('Breakfast', item.meals.breakfast, item.meals.kids, item.meals.ckd)}
                                ${createMealEntry('Mid-Morning Snack', item.meals.snack1)}
                                ${createMealEntry('Lunch', item.meals.lunch, item.meals.kids_lunch, item.meals.ckd_lunch)}
                                ${createMealEntry('Evening Snack', item.meals.snack2)}
                                ${createMealEntry('Dinner', item.meals.dinner, null, item.meals.ckd_dinner)}
                            </div>
                        </div>
                    </div>
                `;
                accordionContainer.innerHTML += dayHtml;
            });
            pane.appendChild(accordionContainer);
            
            pane.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('svg');
                    header.classList.toggle('open');
                    icon.classList.toggle('rotate-180');
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        content.style.padding = "0px";
                    } else {
                        // UPDATED LINE HERE TO ADD A BUFFER
                        content.style.maxHeight = (content.scrollHeight + 60) + "px"; 
                        content.style.padding = "1rem";

                    }
                });
            });
        }
        
        function createMealEntry(title, familyMeal, kidsMeal, ckdMeal) {
            if (!familyMeal) return '';
            let html = `<div class="meal-entry space-y-2 p-3 rounded-lg bg-gray-50">
                            <h4 class="font-bold text-gray-700">${title}</h4>
                            <p class="text-gray-600 text-sm">${familyMeal}</p>`;
            if (kidsMeal) {
                html += `<div class="kids-highlightable p-2 rounded-md bg-green-50 border-l-2 border-green-400"><p class="text-sm"><span class="meal-tag tag-kids">Kid's Lunchbox</span> ${kidsMeal}</p></div>`;
            }
            if (ckdMeal) {
                 html += `<div class="ckd-highlightable p-2 rounded-md bg-red-50 border-l-2 border-red-400"><p class="text-sm"><span class="meal-tag tag-ckd">CKD Note</span> ${ckdMeal}</p></div>`;
            }
            html += `</div>`;
            return html;
        }

        function handleHighlight() {
            const highlightValue = document.querySelector('input[name="highlight"]:checked').value;
            
            document.querySelectorAll('.ckd-highlightable, .kids-highlightable').forEach(el => {
                el.classList.remove('highlight-ckd', 'highlight-kids');
            });
            
            if (highlightValue === 'ckd') {
                document.querySelectorAll('.ckd-highlightable').forEach(el => el.classList.add('highlight-ckd'));
            } else if (highlightValue === 'kids') {
                document.querySelectorAll('.kids-highlightable').forEach(el => el.classList.add('highlight-kids'));
            }
        }

        function renderCalendar(year, month) {
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            document.getElementById('currentMonthYear').textContent = `${monthNames[month]} ${year}`;

            const calendarGrid = document.getElementById('calendar-grid');
            calendarGrid.innerHTML = `
                <div class="font-bold text-gray-700 py-2">Sun</div>
                <div class="font-bold text-gray-700 py-2">Mon</div>
                <div class="font-bold text-gray-700 py-2">Tue</div>
                <div class="font-bold text-gray-700 py-2">Wed</div>
                <div class="font-bold text-gray-700 py-2">Thu</div>
                <div class="font-bold text-gray-700 py-2">Fri</div>
                <div class="font-bold text-gray-700 py-2">Sat</div>
            `;

            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < firstDayOfMonth; i++) {
                calendarGrid.innerHTML += `<div class="py-2"></div>`;
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.textContent = day;
                dayCell.className = `py-2 cursor-pointer hover:bg-gray-200 rounded-full transition-colors duration-200 flex items-center justify-center`;
                
                if (year === 2025 && month === 5 && day >= 1 && day <= menuData.length) { // Only highlight days with menu data for June 2025
                    dayCell.classList.add('font-semibold', 'text-gray-800');
                    dayCell.dataset.day = day;
                    dayCell.addEventListener('click', (e) => {
                        const clickedDay = parseInt(e.target.dataset.day);
                        const weekNumber = Math.ceil(clickedDay / 7);
                        switchTab(weekNumber.toString());

                        // Close all accordions first
                        document.querySelectorAll('.accordion-header.open').forEach(header => {
                            const content = header.nextElementSibling;
                            const icon = header.querySelector('svg');
                            header.classList.remove('open');
                            icon.classList.remove('rotate-180');
                            content.style.maxHeight = null;
                            content.style.padding = "0px";
                        });

                        // Open the specific accordion
                        const targetAccordion = document.getElementById(`day-${clickedDay}-accordion`);
                        if (targetAccordion) {
                            const header = targetAccordion.querySelector('.accordion-header');
                            const content = targetAccordion.querySelector('.accordion-content');
                            const icon = targetAccordion.querySelector('svg');

                            header.classList.add('open');
                            icon.classList.add('rotate-180');
                            content.style.maxHeight = content.scrollHeight + "px"; // This line is for calendar day click, not the general accordion logic
                            content.style.padding = "1rem";

                            targetAccordion.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }

                        // Remove active class from previous day and add to current
                        document.querySelectorAll('.calendar-day-active').forEach(el => el.classList.remove('calendar-day-active'));
                        e.target.classList.add('calendar-day-active');
                    });
                } else {
                    dayCell.classList.add('text-gray-400'); // Days outside the menu range or other months
                }
                calendarGrid.appendChild(dayCell);
            }
        }

        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>
